# modules/youtube_downloader/manifest.yaml
name: "youtube_downloader"
display_name: "YouTube –ó–∞–≥—Ä—É–∑—á–∏–∫"
version: "1.0.0"
description: "–ú–æ–¥—É–ª—å –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ —Å YouTube –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã SwiftDevBot."
author: "SwiftDevBot Team"

python_requirements:
  - "yt-dlp>=2023.7.6"
  - "aiofiles>=23.0.0"

sdb_module_dependencies: []

model_definitions:
  - "modules.youtube_downloader.models.YouTubeDownload"

commands:
  - command: "youtube"
    description: "üì∫ YouTube –ó–∞–≥—Ä—É–∑—á–∏–∫"
    icon: "üì∫"
    category: "–ú–µ–¥–∏–∞"
    admin_only: false

permissions: 
  - name: "youtube_downloader.access_user_features"
    description: "–î–æ—Å—Ç—É–ø –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –º–æ–¥—É–ª—è YouTube –ó–∞–≥—Ä—É–∑—á–∏–∫."
  - name: "youtube_downloader.download_video"
    description: "–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ —Å YouTube."
  - name: "youtube_downloader.download_audio"
    description: "–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ —Å YouTube."
  - name: "youtube_downloader.view_history"
    description: "–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∑–æ–∫."
  - name: "youtube_downloader.admin_manage"
    description: "[–ê–î–ú–ò–ù] –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è –º–æ–¥—É–ª—è YouTube –ó–∞–≥—Ä—É–∑—á–∏–∫."

settings:
  max_downloads_per_day:
    type: "int"
    label: "–ú–∞–∫—Å–∏–º—É–º –∑–∞–≥—Ä—É–∑–æ–∫ –≤ –¥–µ–Ω—å"
    description: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≥—Ä—É–∑–æ–∫ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–µ–Ω—å."
    default: 10
    required: false
  
  max_file_size_mb:
    type: "int"
    label: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (–ú–ë)"
    description: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ –º–µ–≥–∞–±–∞–π—Ç–∞—Ö."
    default: 100
    required: false
  
  allow_playlists:
    type: "bool"
    label: "–†–∞–∑—Ä–µ—à–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã"
    description: "–†–∞–∑—Ä–µ—à–∏—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤."
    default: false
    required: false

metadata:
  min_sdb_core_version: "0.1.0"
  tags: ["media", "youtube", "download", "video", "audio"]
  # –°—Ç–∞—Ä–∞—è —Å—Ö–µ–º–∞ (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  assign_default_access_to_user_role: true
  # –ù–æ–≤–∞—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –∞–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
  auto_assign_permissions:
    - role: "User"
      permissions:
        - "youtube_downloader.access_user_features"
        - "youtube_downloader.download_video"
        - "youtube_downloader.download_audio"
        - "youtube_downloader.view_history"
    - role: "Moderator"
      permissions:
        - "youtube_downloader.access_user_features"
        - "youtube_downloader.download_video"
        - "youtube_downloader.download_audio"
        - "youtube_downloader.view_history"
    - role: "Admin"
      permissions:
        - "youtube_downloader.access_user_features"
        - "youtube_downloader.download_video"
        - "youtube_downloader.download_audio"
        - "youtube_downloader.view_history"
        - "youtube_downloader.admin_manage"
