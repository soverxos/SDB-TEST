# üóÑÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (db)

## –û–±–∑–æ—Ä

–ú–æ–¥—É–ª—å `db` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SwiftDevBot, –≤–∫–ª—é—á–∞—è –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### `python sdb db upgrade`

–ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic –¥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏.

**–û–ø—Ü–∏–∏:**
- `revision` - ID —Ä–µ–≤–∏–∑–∏–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: head)

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
python sdb db upgrade

# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–≤–∏–∑–∏–∏
python sdb db upgrade abc123def456

# –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞ –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –≤–ø–µ—Ä–µ–¥
python sdb db upgrade +1

# –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
python sdb db upgrade base
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic –¥–æ —Ä–µ–≤–∏–∑–∏–∏: head

üìã –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
   ‚úÖ 001_initial_schema.py
   ‚úÖ 002_add_user_roles.py
   ‚úÖ 003_add_permissions.py
   ‚úÖ 004_add_module_support.py

‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!
üìä –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ç–∞–±–ª–∏—Ü: 8
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 2.1 —Å–µ–∫—É–Ω–¥—ã
```

### `python sdb db downgrade`

–û—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic.

**–û–ø—Ü–∏–∏:**
- `revision` - ID —Ä–µ–≤–∏–∑–∏–∏ –¥–ª—è –æ—Ç–∫–∞—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é –Ω–∞–∑–∞–¥
python sdb db downgrade

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –¥–≤–µ –≤–µ—Ä—Å–∏–∏ –Ω–∞–∑–∞–¥
python sdb db downgrade 2

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ä–µ–≤–∏–∑–∏–∏
python sdb db downgrade abc123def456

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –¥–æ –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
python sdb db downgrade base
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ö†Ô∏è –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π Alembic –¥–æ —Ä–µ–≤–∏–∑–∏–∏: 1

üìã –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–∫–∞—Ç–∞:
   ‚ùå 004_add_module_support.py
   ‚ùå 003_add_permissions.py

‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö!

‚ùì –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è? [y/N]: y

‚úÖ –û—Ç–∫–∞—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω!
üìä –û—Ç–∫–∞—á–µ–Ω–æ —Ç–∞–±–ª–∏—Ü: 2
‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 1.5 —Å–µ–∫—É–Ω–¥—ã
```

### `python sdb db revision`

–°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic.

**–û–ø—Ü–∏–∏:**
- `-m, --message` - –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- `--autogenerate/--no-autogenerate` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
python sdb db revision -m "Add user preferences table"

# –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é –º–∏–≥—Ä–∞—Ü–∏—é
python sdb db revision -m "Custom migration" --no-autogenerate
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–µ–≤–∏–∑–∏–∏ Alembic —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º: 'Add user preferences table'

üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
   ‚úÖ –ù–∞–π–¥–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö
   ‚úÖ –°–æ–∑–¥–∞–Ω SQL –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü
   ‚úÖ –°–æ–∑–¥–∞–Ω SQL –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

üìÑ –§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω: alembic_migrations/versions/005_add_user_preferences.py
üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
   - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã user_preferences
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π
```

### `python sdb db status`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π.

**–û–ø—Ü–∏–∏:**
- `--verbose, -v` - –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
python sdb db status

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
python sdb db status --verbose
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–π Alembic:

üü¢ –¢–µ–∫—É—â–∞—è —Ä–µ–≤–∏–∑–∏—è: 004_add_module_support (head)
üìÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∞: 2024-01-15 14:30:22
üìã –í—Å–µ–≥–æ –º–∏–≥—Ä–∞—Ü–∏–π: 4

üìã –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π:
   ‚úÖ 001_initial_schema (2024-01-15 10:00:00)
   ‚úÖ 002_add_user_roles (2024-01-15 10:15:00)
   ‚úÖ 003_add_permissions (2024-01-15 10:30:00)
   ‚úÖ 004_add_module_support (2024-01-15 14:30:22)

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   üìÅ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –º–∏–≥—Ä–∞—Ü–∏–π: 4/4
   üìä –†–∞–∑–º–µ—Ä –ë–î: 2.1MB
   üìà –ó–∞–ø–∏—Å–∏: 1,250
```

### `python sdb db init-core`

**‚ö†Ô∏è –û–ü–ê–°–ù–û!** –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã —è–¥—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é, –º–∏–Ω—É—è Alembic.

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã —è–¥—Ä–∞
python sdb db init-core
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚ö†Ô∏è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü —è–¥—Ä–∞ SDB –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–æ–ª–µ–π –Ω–∞–ø—Ä—è–º—É—é

‚ö†Ô∏è –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—ã —è–¥—Ä–∞ –∏ —Ä–æ–ª–∏ –Ω–∞–ø—Ä—è–º—É—é, –∏–≥–Ω–æ—Ä–∏—Ä—É—è Alembic.

‚ùì –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã —è–¥—Ä–∞ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–æ–ª–∏ –Ω–∞–ø—Ä—è–º—É—é? [y/N]: y

üóÑÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ë–î: sqlite (URL —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫)

üìã –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —è–¥—Ä–∞...
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_users
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_roles
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_permissions
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_user_roles
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_role_permissions
   ‚úÖ –¢–∞–±–ª–∏—Ü–∞: sdb_user_permissions

üìã –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ä–æ–ª–µ–π...
   ‚úÖ –†–æ–ª—å: admin
   ‚úÖ –†–æ–ª—å: user
   ‚úÖ –†–æ–ª—å: guest

‚úÖ –ö–æ–º–∞–Ω–¥–∞ 'db init-core' —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
```

### `python sdb db stamp`

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ä–µ–≤–∏–∑–∏—é Alembic –≤ –ë–î –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π.

**–û–ø—Ü–∏–∏:**
- `revision` - ID —Ä–µ–≤–∏–∑–∏–∏ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- `--purge` - –æ—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤–µ—Ä—Å–∏–π –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–≤–∏–∑–∏—é
python sdb db stamp head

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ä–µ–≤–∏–∑–∏—é
python sdb db stamp abc123def456

# –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤–µ—Ä—Å–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–µ–≤–∏–∑–∏—é
python sdb db stamp head --purge
```

## –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### `python sdb db optimize`

–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

**–û–ø—Ü–∏–∏:**
- `--rebuild-indexes` - –ø–µ—Ä–µ—Å—Ç—Ä–æ–∏—Ç—å –≤—Å–µ –∏–Ω–¥–µ–∫—Å—ã
- `--update-stats` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `--vacuum` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å VACUUM –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–ª–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
python sdb db optimize

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–æ–π –∏–Ω–¥–µ–∫—Å–æ–≤
python sdb db optimize --rebuild-indexes

# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
python sdb db optimize --update-stats
```

### `python sdb db vacuum`

–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–û–ø—Ü–∏–∏:**
- `--aggressive` - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
- `--analyze` - –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ VACUUM

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –û–±—ã—á–Ω—ã–π VACUUM
python sdb db vacuum

# –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π VACUUM
python sdb db vacuum --aggressive

# VACUUM —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
python sdb db vacuum --analyze
```

### `python sdb db analyze`

–°–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.

**–û–ø—Ü–∏–∏:**
- `--full` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- `--table TABLE` - –∞–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
python sdb db analyze

# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
python sdb db analyze --table users

# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑
python sdb db analyze --full
```

### `python sdb db size`

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü.

**–û–ø—Ü–∏–∏:**
- `--human-readable` - —Ä–∞–∑–º–µ—Ä –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
- `--detailed` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ë–î
python sdb db size

# –†–∞–∑–º–µ—Ä –≤ —á–∏—Ç–∞–µ–º–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
python sdb db size --human-readable

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
python sdb db size --detailed
```

### `python sdb db tables`

–í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–∏—Ö.

**–û–ø—Ü–∏–∏:**
- `--list` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
- `--stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
python sdb db tables

# –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
python sdb db tables --list

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º
python sdb db tables --stats
```

### `python sdb db export`

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã.

**–û–ø—Ü–∏–∏:**
- `--format json/csv` - —Ñ–æ—Ä–º–∞—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞
- `--table TABLE_NAME` - —ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
- `--output FILE` - —Ñ–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON
python sdb db export --format json

# –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –≤ CSV
python sdb db export --format csv --table users

# –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–∞–π–ª
python sdb db export --format json --output data_export.json
```

### `python sdb db import`

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

**–û–ø—Ü–∏–∏:**
- `--file FILE` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
- `--format json/csv` - —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞
- `--table TABLE_NAME` - —Ü–µ–ª–µ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ò–º–ø–æ—Ä—Ç –∏–∑ JSON —Ñ–∞–π–ª–∞
python sdb db import --file data_export.json

# –ò–º–ø–æ—Ä—Ç –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
python sdb db import --file users.csv --table users

# –ò–º–ø–æ—Ä—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ñ–æ—Ä–º–∞—Ç–∞
python sdb db import --file data.csv --format csv
```

### `python sdb db health-check`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–û–ø—Ü–∏–∏:**
- `--full` - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `--fix` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
python sdb db health-check

# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
python sdb db health-check --full

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
python sdb db health-check --fix
```

### `python sdb db maintenance`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ë–î.

**–û–ø—Ü–∏–∏:**
- `--auto` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
- `--schedule` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
python sdb db maintenance --auto

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
python sdb db maintenance --schedule
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏–≥—Ä–∞—Ü–∏–π

```
alembic_migrations/
‚îú‚îÄ‚îÄ versions/
‚îÇ   ‚îú‚îÄ‚îÄ 001_initial_schema.py
‚îÇ   ‚îú‚îÄ‚îÄ 002_add_user_roles.py
‚îÇ   ‚îú‚îÄ‚îÄ 003_add_permissions.py
‚îÇ   ‚îî‚îÄ‚îÄ 004_add_module_support.py
‚îú‚îÄ‚îÄ env.py
‚îî‚îÄ‚îÄ script.py.mako
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `python sdb db downgrade base` - —É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
- `python sdb db init-core --force` - –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —Ç–∞–±–ª–∏—Ü—ã
- `python sdb db stamp --purge` - —É–¥–∞–ª–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π

### ‚ö†Ô∏è –û–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `python sdb db downgrade` - –æ—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π
- `python sdb db vacuum --aggressive` - –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ë–î
- `python sdb db optimize --rebuild` - –¥–æ–ª–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- `python sdb db status` - —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- `python sdb db upgrade` - –¥–æ–±–∞–≤–ª—è–µ—Ç, –Ω–µ —É–¥–∞–ª—è–µ—Ç
- `python sdb db size` - —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç —Ä–∞–∑–º–µ—Ä—ã
- `python sdb db tables` - —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã**: –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –∫–æ–ø–∏–∏ –¥–∞–Ω–Ω—ã—Ö
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ –æ–¥–Ω–æ–π
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
python sdb db status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Alembic
python sdb db upgrade --verbose

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
python sdb db downgrade 1
python sdb db upgrade
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–≥—Ä–∞—Ü–∏–π"
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π
python sdb db status --verbose

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞
python sdb db revision -m "Resolve migration conflict"
```

### –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
python sdb config show

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ë–î
python sdb db health-check
```

## –¢–∏–ø—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

### SQLite
- **–§–∞–π–ª**: `Database_files/swiftdevbot.db`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü—Ä–æ—Å—Ç–æ—Ç–∞, –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö

### PostgreSQL
- **DSN**: `postgresql://user:pass@localhost/dbname`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –¢—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

### MySQL
- **DSN**: `mysql://user:pass@localhost/dbname`
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ
- **–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π SQLAlchemy 